\doxysection{include/ttak/mem/mem.h File Reference}
\hypertarget{mem_8h}{}\label{mem_8h}\index{include/ttak/mem/mem.h@{include/ttak/mem/mem.h}}
{\ttfamily \#include $<$stddef.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include $<$stdalign.\+h$>$}\newline
{\ttfamily \#include $<$pthread.\+h$>$}\newline
{\ttfamily \#include $<$ttak/atomic/atomic.\+h$>$}\newline
Include dependency graph for mem.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mem_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=348pt]{mem_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structttak__mem__header__t}{ttak\+\_\+mem\+\_\+header\+\_\+t}}
\begin{DoxyCompactList}\small\item\em "{}\+Fortress"{} Memory Header. 64-\/byte aligned to prevent False Sharing and ensure user pointer alignment. Total size is 128 bytes to maintain 64-\/byte alignment for user data. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{mem_8h_a56bacec5f02dbd8cad7b15e6682fbf20}{TTAK\+\_\+\+CACHE\+\_\+\+LINE\+\_\+\+SIZE}}~64
\begin{DoxyCompactList}\small\item\em Alignment for cache-\/line optimization (64-\/byte). \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{mem_8h_a798ceb4ce7e1d84af3001d7ec38d3da2}{\+\_\+\+\_\+\+TTAK\+\_\+\+UNSAFE\+\_\+\+MEM\+\_\+\+FOREVER\+\_\+\+\_\+}}~((uint64\+\_\+t)-\/1)
\begin{DoxyCompactList}\small\item\em Macro to indicate that the allocated memory should persist forever. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{mem_8h_a02d61fafa21eadc8010ca9803d77bafb}{TTAK\+\_\+\+MAGIC\+\_\+\+NUMBER}}~0x5454414B
\begin{DoxyCompactList}\small\item\em "{}\+Fortress"{} Magic Number for header validation. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{mem_8h_ac5b096c74969e7dbd5e24d44a446c015}{SAFE\+\_\+\+NULL}}~NULL
\begin{DoxyCompactList}\small\item\em Sentinel for invalidated references. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{mem_8h_aa4fb4762838f23fd8edc26f01d12f0e5}{ttak\+\_\+mem\+\_\+alloc}}(size,  lifetime,  now)~\mbox{\hyperlink{mem_8h_aff3d4e6c920caf8bdeee3b2561a2ae46}{ttak\+\_\+mem\+\_\+alloc\+\_\+safe}}(size, lifetime, now, false, false, true, false, \mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdadab57ac5f60f1170e17ecfe853611ac80a}{TTAK\+\_\+\+MEM\+\_\+\+DEFAULT}})
\item 
\#define \mbox{\hyperlink{mem_8h_a29ae926197a7e7154d98730bd3de6242}{ttak\+\_\+mem\+\_\+alloc\+\_\+with\+\_\+flags}}(size,  lifetime,  now,  flags)~\mbox{\hyperlink{mem_8h_aff3d4e6c920caf8bdeee3b2561a2ae46}{ttak\+\_\+mem\+\_\+alloc\+\_\+safe}}(size, lifetime, now, false, false, true, false, flags)
\item 
\#define \mbox{\hyperlink{mem_8h_aecbcfc6a4045b6bd854f785a49706a77}{ttak\+\_\+mem\+\_\+realloc}}(ptr,  size,  lifetime,  now)~\mbox{\hyperlink{mem_8h_a7eec3d633592a863f39155500dd0227a}{ttak\+\_\+mem\+\_\+realloc\+\_\+safe}}(ptr, size, lifetime, now, false, \mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdadab57ac5f60f1170e17ecfe853611ac80a}{TTAK\+\_\+\+MEM\+\_\+\+DEFAULT}})
\item 
\#define \mbox{\hyperlink{mem_8h_ac436c1f90ce06b2759063c0d124cbd90}{ttak\+\_\+mem\+\_\+realloc\+\_\+with\+\_\+flags}}(ptr,  size,  lifetime,  now,  flags)~\mbox{\hyperlink{mem_8h_a7eec3d633592a863f39155500dd0227a}{ttak\+\_\+mem\+\_\+realloc\+\_\+safe}}(ptr, size, lifetime, now, false, flags)
\item 
\#define \mbox{\hyperlink{mem_8h_aafdc8a651b46ebef1e1055f9ec21c03b}{ttak\+\_\+mem\+\_\+dup}}(src,  size,  lifetime,  now)~\mbox{\hyperlink{mem_8h_af356aeb5f83df49f650bc4283de8d931}{ttak\+\_\+mem\+\_\+dup\+\_\+safe}}(src, size, lifetime, now, false, \mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdadab57ac5f60f1170e17ecfe853611ac80a}{TTAK\+\_\+\+MEM\+\_\+\+DEFAULT}})
\item 
\#define \mbox{\hyperlink{mem_8h_abc7e126aa61344f6b46c2508a9901ebf}{ttak\+\_\+mem\+\_\+dup\+\_\+with\+\_\+flags}}(src,  size,  lifetime,  now,  flags)~\mbox{\hyperlink{mem_8h_af356aeb5f83df49f650bc4283de8d931}{ttak\+\_\+mem\+\_\+dup\+\_\+safe}}(src, size, lifetime, now, false, flags)
\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef void \mbox{\hyperlink{mem_8h_ab724d37f1a1c16f006309b8b2036b232}{ttak\+\_\+lifecycle\+\_\+obj\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdad}{ttak\+\_\+mem\+\_\+flags\+\_\+t}} \{ \mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdadab57ac5f60f1170e17ecfe853611ac80a}{TTAK\+\_\+\+MEM\+\_\+\+DEFAULT}} = 0
, \mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdadaa4cff10407296a029dba423e1ac75551}{TTAK\+\_\+\+MEM\+\_\+\+HUGE\+\_\+\+PAGES}} = (1 \texorpdfstring{$<$}{<}\texorpdfstring{$<$}{<} 0)
, \mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdada85fc84c07c8164ea4cd8048365cc3e2d}{TTAK\+\_\+\+MEM\+\_\+\+CACHE\+\_\+\+ALIGNED}} = (1 \texorpdfstring{$<$}{<}\texorpdfstring{$<$}{<} 1)
, \mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdada0b16ffc2f709ae7e7a5439e0ca8d7d86}{TTAK\+\_\+\+MEM\+\_\+\+STRICT\+\_\+\+CHECK}} = (1 \texorpdfstring{$<$}{<}\texorpdfstring{$<$}{<} 2)
 \}
\begin{DoxyCompactList}\small\item\em Memory allocation flags. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{mem_8h_aff3d4e6c920caf8bdeee3b2561a2ae46}{ttak\+\_\+mem\+\_\+alloc\+\_\+safe}} (size\+\_\+t size, uint64\+\_\+t lifetime\+\_\+ticks, uint64\+\_\+t now, \+\_\+\+Bool is\+\_\+const, \+\_\+\+Bool is\+\_\+volatile, \+\_\+\+Bool allow\+\_\+direct, \+\_\+\+Bool is\+\_\+root, \mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdad}{ttak\+\_\+mem\+\_\+flags\+\_\+t}} flags)
\begin{DoxyCompactList}\small\item\em Unified memory allocation with lifecycle management and hardware optimization. \end{DoxyCompactList}\item 
void \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{mem_8h_a7eec3d633592a863f39155500dd0227a}{ttak\+\_\+mem\+\_\+realloc\+\_\+safe}} (void \texorpdfstring{$\ast$}{*}ptr, size\+\_\+t new\+\_\+size, uint64\+\_\+t lifetime\+\_\+ticks, uint64\+\_\+t now, \+\_\+\+Bool is\+\_\+root, \mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdad}{ttak\+\_\+mem\+\_\+flags\+\_\+t}} flags)
\begin{DoxyCompactList}\small\item\em Reallocates memory with lifecycle management. \end{DoxyCompactList}\item 
void \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{mem_8h_af356aeb5f83df49f650bc4283de8d931}{ttak\+\_\+mem\+\_\+dup\+\_\+safe}} (const void \texorpdfstring{$\ast$}{*}src, size\+\_\+t size, uint64\+\_\+t lifetime\+\_\+ticks, uint64\+\_\+t now, \+\_\+\+Bool is\+\_\+root, \mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdad}{ttak\+\_\+mem\+\_\+flags\+\_\+t}} flags)
\begin{DoxyCompactList}\small\item\em Duplicates a memory block with lifecycle management. Provides a highly optimized internal path for cloning structures and buffers. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{mem_8h_afdcd75479e1ca4dde197214d0430de65}{ttak\+\_\+mem\+\_\+free}} (void \texorpdfstring{$\ast$}{*}ptr)
\begin{DoxyCompactList}\small\item\em Frees the memory block and removes it from the global shadow map. \end{DoxyCompactList}\item 
static void \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{mem_8h_ab6f5b08c17dc0db9a4b09eeb8bab4dc6}{ttak\+\_\+mem\+\_\+access}} (void \texorpdfstring{$\ast$}{*}ptr, uint64\+\_\+t now)
\begin{DoxyCompactList}\small\item\em Accesses the memory block, verifying its lifecycle and security. Inlined for maximum performance ("{}grotesque tweak"{}). \end{DoxyCompactList}\item 
void \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{mem_8h_ada3d51eee9ddc6a5859312387539df65}{tt\+\_\+inspect\+\_\+dirty\+\_\+pointers}} (uint64\+\_\+t now, size\+\_\+t \texorpdfstring{$\ast$}{*}count\+\_\+out)
\begin{DoxyCompactList}\small\item\em Inspects and returns pointers that are expired or have abnormal access counts. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{mem_8h_af73ea5e149eaa8dc0df429ad1f27cd45}{tt\+\_\+autoclean\+\_\+dirty\+\_\+pointers}} (uint64\+\_\+t now)
\begin{DoxyCompactList}\small\item\em Automatically cleans up expired memory blocks with adaptive scheduling. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{mem_8h_ae8973d60d53321ee8b36d15b1d7698ea}{ttak\+\_\+mem\+\_\+configure\+\_\+gc}} (uint64\+\_\+t min\+\_\+interval\+\_\+ns, uint64\+\_\+t max\+\_\+interval\+\_\+ns, size\+\_\+t pressure\+\_\+threshold)
\begin{DoxyCompactList}\small\item\em Configures the global background GC (mem\+\_\+tree) parameters. \end{DoxyCompactList}\item 
void \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} \mbox{\hyperlink{mem_8h_a23a79fc56d219a37227ec07299e4571b}{tt\+\_\+autoclean\+\_\+and\+\_\+inspect}} (uint64\+\_\+t now, size\+\_\+t \texorpdfstring{$\ast$}{*}count\+\_\+out)
\begin{DoxyCompactList}\small\item\em Cleans up and returns abnormal pointers. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{mem_8h_adfcac077aeb029c04c4fb47dc33116a0}{ttak\+\_\+mem\+\_\+set\+\_\+trace}} (int enable)
\begin{DoxyCompactList}\small\item\em Sets the global memory tracing flag. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{mem_8h_a901d371e2cc570055bc60bcea5653df5}{ttak\+\_\+mem\+\_\+is\+\_\+trace\+\_\+enabled}} (void)
\begin{DoxyCompactList}\small\item\em Returns whether memory tracing is currently enabled. \end{DoxyCompactList}\item 
static uint32\+\_\+t \mbox{\hyperlink{mem_8h_ad663cf355d411491ef16fbaba940be07}{ttak\+\_\+calc\+\_\+header\+\_\+checksum}} (const \mbox{\hyperlink{structttak__mem__header__t}{ttak\+\_\+mem\+\_\+header\+\_\+t}} \texorpdfstring{$\ast$}{*}h)
\begin{DoxyCompactList}\small\item\em Calculates a 32-\/bit checksum for the memory header. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{mem_8h_a798ceb4ce7e1d84af3001d7ec38d3da2}\label{mem_8h_a798ceb4ce7e1d84af3001d7ec38d3da2} 
\index{mem.h@{mem.h}!\_\_TTAK\_UNSAFE\_MEM\_FOREVER\_\_@{\_\_TTAK\_UNSAFE\_MEM\_FOREVER\_\_}}
\index{\_\_TTAK\_UNSAFE\_MEM\_FOREVER\_\_@{\_\_TTAK\_UNSAFE\_MEM\_FOREVER\_\_}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{\_\_TTAK\_UNSAFE\_MEM\_FOREVER\_\_}{\_\_TTAK\_UNSAFE\_MEM\_FOREVER\_\_}}
{\footnotesize\ttfamily \#define \+\_\+\+\_\+\+TTAK\+\_\+\+UNSAFE\+\_\+\+MEM\+\_\+\+FOREVER\+\_\+\+\_\+~((uint64\+\_\+t)-\/1)}



Macro to indicate that the allocated memory should persist forever. 



Definition at line \mbox{\hyperlink{mem_8h_source_l00019}{19}} of file \mbox{\hyperlink{mem_8h_source}{mem.\+h}}.

\Hypertarget{mem_8h_ac5b096c74969e7dbd5e24d44a446c015}\label{mem_8h_ac5b096c74969e7dbd5e24d44a446c015} 
\index{mem.h@{mem.h}!SAFE\_NULL@{SAFE\_NULL}}
\index{SAFE\_NULL@{SAFE\_NULL}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{SAFE\_NULL}{SAFE\_NULL}}
{\footnotesize\ttfamily \#define SAFE\+\_\+\+NULL~NULL}



Sentinel for invalidated references. 



Definition at line \mbox{\hyperlink{mem_8h_source_l00029}{29}} of file \mbox{\hyperlink{mem_8h_source}{mem.\+h}}.

\Hypertarget{mem_8h_a56bacec5f02dbd8cad7b15e6682fbf20}\label{mem_8h_a56bacec5f02dbd8cad7b15e6682fbf20} 
\index{mem.h@{mem.h}!TTAK\_CACHE\_LINE\_SIZE@{TTAK\_CACHE\_LINE\_SIZE}}
\index{TTAK\_CACHE\_LINE\_SIZE@{TTAK\_CACHE\_LINE\_SIZE}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{TTAK\_CACHE\_LINE\_SIZE}{TTAK\_CACHE\_LINE\_SIZE}}
{\footnotesize\ttfamily \#define TTAK\+\_\+\+CACHE\+\_\+\+LINE\+\_\+\+SIZE~64}



Alignment for cache-\/line optimization (64-\/byte). 



Definition at line \mbox{\hyperlink{mem_8h_source_l00014}{14}} of file \mbox{\hyperlink{mem_8h_source}{mem.\+h}}.

\Hypertarget{mem_8h_a02d61fafa21eadc8010ca9803d77bafb}\label{mem_8h_a02d61fafa21eadc8010ca9803d77bafb} 
\index{mem.h@{mem.h}!TTAK\_MAGIC\_NUMBER@{TTAK\_MAGIC\_NUMBER}}
\index{TTAK\_MAGIC\_NUMBER@{TTAK\_MAGIC\_NUMBER}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{TTAK\_MAGIC\_NUMBER}{TTAK\_MAGIC\_NUMBER}}
{\footnotesize\ttfamily \#define TTAK\+\_\+\+MAGIC\+\_\+\+NUMBER~0x5454414B}



"{}\+Fortress"{} Magic Number for header validation. 



Definition at line \mbox{\hyperlink{mem_8h_source_l00024}{24}} of file \mbox{\hyperlink{mem_8h_source}{mem.\+h}}.

\Hypertarget{mem_8h_aa4fb4762838f23fd8edc26f01d12f0e5}\label{mem_8h_aa4fb4762838f23fd8edc26f01d12f0e5} 
\index{mem.h@{mem.h}!ttak\_mem\_alloc@{ttak\_mem\_alloc}}
\index{ttak\_mem\_alloc@{ttak\_mem\_alloc}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{ttak\_mem\_alloc}{ttak\_mem\_alloc}}
{\footnotesize\ttfamily \#define ttak\+\_\+mem\+\_\+alloc(\begin{DoxyParamCaption}\item[{}]{size,  }\item[{}]{lifetime,  }\item[{}]{now }\end{DoxyParamCaption})~\mbox{\hyperlink{mem_8h_aff3d4e6c920caf8bdeee3b2561a2ae46}{ttak\+\_\+mem\+\_\+alloc\+\_\+safe}}(size, lifetime, now, false, false, true, false, \mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdadab57ac5f60f1170e17ecfe853611ac80a}{TTAK\+\_\+\+MEM\+\_\+\+DEFAULT}})}



Definition at line \mbox{\hyperlink{mem_8h_source_l00168}{168}} of file \mbox{\hyperlink{mem_8h_source}{mem.\+h}}.

\Hypertarget{mem_8h_a29ae926197a7e7154d98730bd3de6242}\label{mem_8h_a29ae926197a7e7154d98730bd3de6242} 
\index{mem.h@{mem.h}!ttak\_mem\_alloc\_with\_flags@{ttak\_mem\_alloc\_with\_flags}}
\index{ttak\_mem\_alloc\_with\_flags@{ttak\_mem\_alloc\_with\_flags}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{ttak\_mem\_alloc\_with\_flags}{ttak\_mem\_alloc\_with\_flags}}
{\footnotesize\ttfamily \#define ttak\+\_\+mem\+\_\+alloc\+\_\+with\+\_\+flags(\begin{DoxyParamCaption}\item[{}]{size,  }\item[{}]{lifetime,  }\item[{}]{now,  }\item[{}]{flags }\end{DoxyParamCaption})~\mbox{\hyperlink{mem_8h_aff3d4e6c920caf8bdeee3b2561a2ae46}{ttak\+\_\+mem\+\_\+alloc\+\_\+safe}}(size, lifetime, now, false, false, true, false, flags)}



Definition at line \mbox{\hyperlink{mem_8h_source_l00169}{169}} of file \mbox{\hyperlink{mem_8h_source}{mem.\+h}}.

\Hypertarget{mem_8h_aafdc8a651b46ebef1e1055f9ec21c03b}\label{mem_8h_aafdc8a651b46ebef1e1055f9ec21c03b} 
\index{mem.h@{mem.h}!ttak\_mem\_dup@{ttak\_mem\_dup}}
\index{ttak\_mem\_dup@{ttak\_mem\_dup}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{ttak\_mem\_dup}{ttak\_mem\_dup}}
{\footnotesize\ttfamily \#define ttak\+\_\+mem\+\_\+dup(\begin{DoxyParamCaption}\item[{}]{src,  }\item[{}]{size,  }\item[{}]{lifetime,  }\item[{}]{now }\end{DoxyParamCaption})~\mbox{\hyperlink{mem_8h_af356aeb5f83df49f650bc4283de8d931}{ttak\+\_\+mem\+\_\+dup\+\_\+safe}}(src, size, lifetime, now, false, \mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdadab57ac5f60f1170e17ecfe853611ac80a}{TTAK\+\_\+\+MEM\+\_\+\+DEFAULT}})}



Definition at line \mbox{\hyperlink{mem_8h_source_l00172}{172}} of file \mbox{\hyperlink{mem_8h_source}{mem.\+h}}.

\Hypertarget{mem_8h_abc7e126aa61344f6b46c2508a9901ebf}\label{mem_8h_abc7e126aa61344f6b46c2508a9901ebf} 
\index{mem.h@{mem.h}!ttak\_mem\_dup\_with\_flags@{ttak\_mem\_dup\_with\_flags}}
\index{ttak\_mem\_dup\_with\_flags@{ttak\_mem\_dup\_with\_flags}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{ttak\_mem\_dup\_with\_flags}{ttak\_mem\_dup\_with\_flags}}
{\footnotesize\ttfamily \#define ttak\+\_\+mem\+\_\+dup\+\_\+with\+\_\+flags(\begin{DoxyParamCaption}\item[{}]{src,  }\item[{}]{size,  }\item[{}]{lifetime,  }\item[{}]{now,  }\item[{}]{flags }\end{DoxyParamCaption})~\mbox{\hyperlink{mem_8h_af356aeb5f83df49f650bc4283de8d931}{ttak\+\_\+mem\+\_\+dup\+\_\+safe}}(src, size, lifetime, now, false, flags)}



Definition at line \mbox{\hyperlink{mem_8h_source_l00173}{173}} of file \mbox{\hyperlink{mem_8h_source}{mem.\+h}}.

\Hypertarget{mem_8h_aecbcfc6a4045b6bd854f785a49706a77}\label{mem_8h_aecbcfc6a4045b6bd854f785a49706a77} 
\index{mem.h@{mem.h}!ttak\_mem\_realloc@{ttak\_mem\_realloc}}
\index{ttak\_mem\_realloc@{ttak\_mem\_realloc}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{ttak\_mem\_realloc}{ttak\_mem\_realloc}}
{\footnotesize\ttfamily \#define ttak\+\_\+mem\+\_\+realloc(\begin{DoxyParamCaption}\item[{}]{ptr,  }\item[{}]{size,  }\item[{}]{lifetime,  }\item[{}]{now }\end{DoxyParamCaption})~\mbox{\hyperlink{mem_8h_a7eec3d633592a863f39155500dd0227a}{ttak\+\_\+mem\+\_\+realloc\+\_\+safe}}(ptr, size, lifetime, now, false, \mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdadab57ac5f60f1170e17ecfe853611ac80a}{TTAK\+\_\+\+MEM\+\_\+\+DEFAULT}})}



Definition at line \mbox{\hyperlink{mem_8h_source_l00170}{170}} of file \mbox{\hyperlink{mem_8h_source}{mem.\+h}}.

\Hypertarget{mem_8h_ac436c1f90ce06b2759063c0d124cbd90}\label{mem_8h_ac436c1f90ce06b2759063c0d124cbd90} 
\index{mem.h@{mem.h}!ttak\_mem\_realloc\_with\_flags@{ttak\_mem\_realloc\_with\_flags}}
\index{ttak\_mem\_realloc\_with\_flags@{ttak\_mem\_realloc\_with\_flags}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{ttak\_mem\_realloc\_with\_flags}{ttak\_mem\_realloc\_with\_flags}}
{\footnotesize\ttfamily \#define ttak\+\_\+mem\+\_\+realloc\+\_\+with\+\_\+flags(\begin{DoxyParamCaption}\item[{}]{ptr,  }\item[{}]{size,  }\item[{}]{lifetime,  }\item[{}]{now,  }\item[{}]{flags }\end{DoxyParamCaption})~\mbox{\hyperlink{mem_8h_a7eec3d633592a863f39155500dd0227a}{ttak\+\_\+mem\+\_\+realloc\+\_\+safe}}(ptr, size, lifetime, now, false, flags)}



Definition at line \mbox{\hyperlink{mem_8h_source_l00171}{171}} of file \mbox{\hyperlink{mem_8h_source}{mem.\+h}}.



\doxysubsection{Typedef Documentation}
\Hypertarget{mem_8h_ab724d37f1a1c16f006309b8b2036b232}\label{mem_8h_ab724d37f1a1c16f006309b8b2036b232} 
\index{mem.h@{mem.h}!ttak\_lifecycle\_obj\_t@{ttak\_lifecycle\_obj\_t}}
\index{ttak\_lifecycle\_obj\_t@{ttak\_lifecycle\_obj\_t}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{ttak\_lifecycle\_obj\_t}{ttak\_lifecycle\_obj\_t}}
{\footnotesize\ttfamily typedef void \mbox{\hyperlink{mem_8h_ab724d37f1a1c16f006309b8b2036b232}{ttak\+\_\+lifecycle\+\_\+obj\+\_\+t}}}



Definition at line \mbox{\hyperlink{mem_8h_source_l00167}{167}} of file \mbox{\hyperlink{mem_8h_source}{mem.\+h}}.



\doxysubsection{Enumeration Type Documentation}
\Hypertarget{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdad}\label{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdad} 
\index{mem.h@{mem.h}!ttak\_mem\_flags\_t@{ttak\_mem\_flags\_t}}
\index{ttak\_mem\_flags\_t@{ttak\_mem\_flags\_t}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{ttak\_mem\_flags\_t}{ttak\_mem\_flags\_t}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdad}{ttak\+\_\+mem\+\_\+flags\+\_\+t}}}



Memory allocation flags. 

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{TTAK\_MEM\_DEFAULT@{TTAK\_MEM\_DEFAULT}!mem.h@{mem.h}}\index{mem.h@{mem.h}!TTAK\_MEM\_DEFAULT@{TTAK\_MEM\_DEFAULT}}}\Hypertarget{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdadab57ac5f60f1170e17ecfe853611ac80a}\label{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdadab57ac5f60f1170e17ecfe853611ac80a} 
TTAK\+\_\+\+MEM\+\_\+\+DEFAULT&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{TTAK\_MEM\_HUGE\_PAGES@{TTAK\_MEM\_HUGE\_PAGES}!mem.h@{mem.h}}\index{mem.h@{mem.h}!TTAK\_MEM\_HUGE\_PAGES@{TTAK\_MEM\_HUGE\_PAGES}}}\Hypertarget{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdadaa4cff10407296a029dba423e1ac75551}\label{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdadaa4cff10407296a029dba423e1ac75551} 
TTAK\+\_\+\+MEM\+\_\+\+HUGE\+\_\+\+PAGES&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{TTAK\_MEM\_CACHE\_ALIGNED@{TTAK\_MEM\_CACHE\_ALIGNED}!mem.h@{mem.h}}\index{mem.h@{mem.h}!TTAK\_MEM\_CACHE\_ALIGNED@{TTAK\_MEM\_CACHE\_ALIGNED}}}\Hypertarget{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdada85fc84c07c8164ea4cd8048365cc3e2d}\label{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdada85fc84c07c8164ea4cd8048365cc3e2d} 
TTAK\+\_\+\+MEM\+\_\+\+CACHE\+\_\+\+ALIGNED&Try to use 2MB/1\+GB pages \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{TTAK\_MEM\_STRICT\_CHECK@{TTAK\_MEM\_STRICT\_CHECK}!mem.h@{mem.h}}\index{mem.h@{mem.h}!TTAK\_MEM\_STRICT\_CHECK@{TTAK\_MEM\_STRICT\_CHECK}}}\Hypertarget{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdada0b16ffc2f709ae7e7a5439e0ca8d7d86}\label{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdada0b16ffc2f709ae7e7a5439e0ca8d7d86} 
TTAK\+\_\+\+MEM\+\_\+\+STRICT\+\_\+\+CHECK&Force 64-\/byte alignment \\
\hline

\end{DoxyEnumFields}


Definition at line \mbox{\hyperlink{mem_8h_source_l00061}{61}} of file \mbox{\hyperlink{mem_8h_source}{mem.\+h}}.



\doxysubsection{Function Documentation}
\Hypertarget{mem_8h_a23a79fc56d219a37227ec07299e4571b}\label{mem_8h_a23a79fc56d219a37227ec07299e4571b} 
\index{mem.h@{mem.h}!tt\_autoclean\_and\_inspect@{tt\_autoclean\_and\_inspect}}
\index{tt\_autoclean\_and\_inspect@{tt\_autoclean\_and\_inspect}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{tt\_autoclean\_and\_inspect()}{tt\_autoclean\_and\_inspect()}}
{\footnotesize\ttfamily void \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} tt\+\_\+autoclean\+\_\+and\+\_\+inspect (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{now,  }\item[{size\+\_\+t \texorpdfstring{$\ast$}{*}}]{count\+\_\+out }\end{DoxyParamCaption})}



Cleans up and returns abnormal pointers. 

\Hypertarget{mem_8h_af73ea5e149eaa8dc0df429ad1f27cd45}\label{mem_8h_af73ea5e149eaa8dc0df429ad1f27cd45} 
\index{mem.h@{mem.h}!tt\_autoclean\_dirty\_pointers@{tt\_autoclean\_dirty\_pointers}}
\index{tt\_autoclean\_dirty\_pointers@{tt\_autoclean\_dirty\_pointers}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{tt\_autoclean\_dirty\_pointers()}{tt\_autoclean\_dirty\_pointers()}}
{\footnotesize\ttfamily void tt\+\_\+autoclean\+\_\+dirty\+\_\+pointers (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{now }\end{DoxyParamCaption})}



Automatically cleans up expired memory blocks with adaptive scheduling. 

\Hypertarget{mem_8h_ada3d51eee9ddc6a5859312387539df65}\label{mem_8h_ada3d51eee9ddc6a5859312387539df65} 
\index{mem.h@{mem.h}!tt\_inspect\_dirty\_pointers@{tt\_inspect\_dirty\_pointers}}
\index{tt\_inspect\_dirty\_pointers@{tt\_inspect\_dirty\_pointers}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{tt\_inspect\_dirty\_pointers()}{tt\_inspect\_dirty\_pointers()}}
{\footnotesize\ttfamily void \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} tt\+\_\+inspect\+\_\+dirty\+\_\+pointers (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{now,  }\item[{size\+\_\+t \texorpdfstring{$\ast$}{*}}]{count\+\_\+out }\end{DoxyParamCaption})}



Inspects and returns pointers that are expired or have abnormal access counts. 

\Hypertarget{mem_8h_ad663cf355d411491ef16fbaba940be07}\label{mem_8h_ad663cf355d411491ef16fbaba940be07} 
\index{mem.h@{mem.h}!ttak\_calc\_header\_checksum@{ttak\_calc\_header\_checksum}}
\index{ttak\_calc\_header\_checksum@{ttak\_calc\_header\_checksum}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{ttak\_calc\_header\_checksum()}{ttak\_calc\_header\_checksum()}}
{\footnotesize\ttfamily static uint32\+\_\+t ttak\+\_\+calc\+\_\+header\+\_\+checksum (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structttak__mem__header__t}{ttak\+\_\+mem\+\_\+header\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{h }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Calculates a 32-\/bit checksum for the memory header. 



Definition at line \mbox{\hyperlink{mem_8h_source_l00146}{146}} of file \mbox{\hyperlink{mem_8h_source}{mem.\+h}}.

\Hypertarget{mem_8h_ab6f5b08c17dc0db9a4b09eeb8bab4dc6}\label{mem_8h_ab6f5b08c17dc0db9a4b09eeb8bab4dc6} 
\index{mem.h@{mem.h}!ttak\_mem\_access@{ttak\_mem\_access}}
\index{ttak\_mem\_access@{ttak\_mem\_access}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{ttak\_mem\_access()}{ttak\_mem\_access()}}
{\footnotesize\ttfamily static void \texorpdfstring{$\ast$}{*} ttak\+\_\+mem\+\_\+access (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{ptr,  }\item[{uint64\+\_\+t}]{now }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Accesses the memory block, verifying its lifecycle and security. Inlined for maximum performance ("{}grotesque tweak"{}). 



Definition at line \mbox{\hyperlink{mem_8h_source_l00093}{93}} of file \mbox{\hyperlink{mem_8h_source}{mem.\+h}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=328pt]{mem_8h_ab6f5b08c17dc0db9a4b09eeb8bab4dc6_cgraph}
\end{center}
\end{figure}
\Hypertarget{mem_8h_aff3d4e6c920caf8bdeee3b2561a2ae46}\label{mem_8h_aff3d4e6c920caf8bdeee3b2561a2ae46} 
\index{mem.h@{mem.h}!ttak\_mem\_alloc\_safe@{ttak\_mem\_alloc\_safe}}
\index{ttak\_mem\_alloc\_safe@{ttak\_mem\_alloc\_safe}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{ttak\_mem\_alloc\_safe()}{ttak\_mem\_alloc\_safe()}}
{\footnotesize\ttfamily void \texorpdfstring{$\ast$}{*} ttak\+\_\+mem\+\_\+alloc\+\_\+safe (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{size,  }\item[{uint64\+\_\+t}]{lifetime\+\_\+ticks,  }\item[{uint64\+\_\+t}]{now,  }\item[{\+\_\+\+Bool}]{is\+\_\+const,  }\item[{\+\_\+\+Bool}]{is\+\_\+volatile,  }\item[{\+\_\+\+Bool}]{allow\+\_\+direct,  }\item[{\+\_\+\+Bool}]{is\+\_\+root,  }\item[{\mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdad}{ttak\+\_\+mem\+\_\+flags\+\_\+t}}}]{flags }\end{DoxyParamCaption})}



Unified memory allocation with lifecycle management and hardware optimization. 

\Hypertarget{mem_8h_ae8973d60d53321ee8b36d15b1d7698ea}\label{mem_8h_ae8973d60d53321ee8b36d15b1d7698ea} 
\index{mem.h@{mem.h}!ttak\_mem\_configure\_gc@{ttak\_mem\_configure\_gc}}
\index{ttak\_mem\_configure\_gc@{ttak\_mem\_configure\_gc}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{ttak\_mem\_configure\_gc()}{ttak\_mem\_configure\_gc()}}
{\footnotesize\ttfamily void ttak\+\_\+mem\+\_\+configure\+\_\+gc (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{min\+\_\+interval\+\_\+ns,  }\item[{uint64\+\_\+t}]{max\+\_\+interval\+\_\+ns,  }\item[{size\+\_\+t}]{pressure\+\_\+threshold }\end{DoxyParamCaption})}



Configures the global background GC (mem\+\_\+tree) parameters. 

\Hypertarget{mem_8h_af356aeb5f83df49f650bc4283de8d931}\label{mem_8h_af356aeb5f83df49f650bc4283de8d931} 
\index{mem.h@{mem.h}!ttak\_mem\_dup\_safe@{ttak\_mem\_dup\_safe}}
\index{ttak\_mem\_dup\_safe@{ttak\_mem\_dup\_safe}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{ttak\_mem\_dup\_safe()}{ttak\_mem\_dup\_safe()}}
{\footnotesize\ttfamily void \texorpdfstring{$\ast$}{*} ttak\+\_\+mem\+\_\+dup\+\_\+safe (\begin{DoxyParamCaption}\item[{const void \texorpdfstring{$\ast$}{*}}]{src,  }\item[{size\+\_\+t}]{size,  }\item[{uint64\+\_\+t}]{lifetime\+\_\+ticks,  }\item[{uint64\+\_\+t}]{now,  }\item[{\+\_\+\+Bool}]{is\+\_\+root,  }\item[{\mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdad}{ttak\+\_\+mem\+\_\+flags\+\_\+t}}}]{flags }\end{DoxyParamCaption})}



Duplicates a memory block with lifecycle management. Provides a highly optimized internal path for cloning structures and buffers. 

\Hypertarget{mem_8h_afdcd75479e1ca4dde197214d0430de65}\label{mem_8h_afdcd75479e1ca4dde197214d0430de65} 
\index{mem.h@{mem.h}!ttak\_mem\_free@{ttak\_mem\_free}}
\index{ttak\_mem\_free@{ttak\_mem\_free}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{ttak\_mem\_free()}{ttak\_mem\_free()}}
{\footnotesize\ttfamily void ttak\+\_\+mem\+\_\+free (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{ptr }\end{DoxyParamCaption})}



Frees the memory block and removes it from the global shadow map. 

\Hypertarget{mem_8h_a901d371e2cc570055bc60bcea5653df5}\label{mem_8h_a901d371e2cc570055bc60bcea5653df5} 
\index{mem.h@{mem.h}!ttak\_mem\_is\_trace\_enabled@{ttak\_mem\_is\_trace\_enabled}}
\index{ttak\_mem\_is\_trace\_enabled@{ttak\_mem\_is\_trace\_enabled}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{ttak\_mem\_is\_trace\_enabled()}{ttak\_mem\_is\_trace\_enabled()}}
{\footnotesize\ttfamily int ttak\+\_\+mem\+\_\+is\+\_\+trace\+\_\+enabled (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Returns whether memory tracing is currently enabled. 

\Hypertarget{mem_8h_a7eec3d633592a863f39155500dd0227a}\label{mem_8h_a7eec3d633592a863f39155500dd0227a} 
\index{mem.h@{mem.h}!ttak\_mem\_realloc\_safe@{ttak\_mem\_realloc\_safe}}
\index{ttak\_mem\_realloc\_safe@{ttak\_mem\_realloc\_safe}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{ttak\_mem\_realloc\_safe()}{ttak\_mem\_realloc\_safe()}}
{\footnotesize\ttfamily void \texorpdfstring{$\ast$}{*} ttak\+\_\+mem\+\_\+realloc\+\_\+safe (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{ptr,  }\item[{size\+\_\+t}]{new\+\_\+size,  }\item[{uint64\+\_\+t}]{lifetime\+\_\+ticks,  }\item[{uint64\+\_\+t}]{now,  }\item[{\+\_\+\+Bool}]{is\+\_\+root,  }\item[{\mbox{\hyperlink{mem_8h_a05020ce7df6068f7d7f515ee4ea9cdad}{ttak\+\_\+mem\+\_\+flags\+\_\+t}}}]{flags }\end{DoxyParamCaption})}



Reallocates memory with lifecycle management. 

\Hypertarget{mem_8h_adfcac077aeb029c04c4fb47dc33116a0}\label{mem_8h_adfcac077aeb029c04c4fb47dc33116a0} 
\index{mem.h@{mem.h}!ttak\_mem\_set\_trace@{ttak\_mem\_set\_trace}}
\index{ttak\_mem\_set\_trace@{ttak\_mem\_set\_trace}!mem.h@{mem.h}}
\doxysubsubsection{\texorpdfstring{ttak\_mem\_set\_trace()}{ttak\_mem\_set\_trace()}}
{\footnotesize\ttfamily void ttak\+\_\+mem\+\_\+set\+\_\+trace (\begin{DoxyParamCaption}\item[{int}]{enable }\end{DoxyParamCaption})}



Sets the global memory tracing flag. 

